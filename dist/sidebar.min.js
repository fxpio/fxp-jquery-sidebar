var FxpSidebar=function(e,d){"use strict";function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function n(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,o,t){return o&&n(e.prototype,o),t&&n(e,t),e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function t(e,o){return(t=Object.setPrototypeOf||function(e,o){return e.__proto__=o,e})(e,o)}function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,o=l(t);return e=n?(e=l(this).constructor,Reflect.construct(o,arguments,e)):o.apply(this,arguments),o=this,!(e=e)||"object"!=typeof e&&"function"!=typeof e?r(o):e}}function c(e,o,t){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,o,t){e=function(e,o){for(;!Object.prototype.hasOwnProperty.call(e,o)&&null!==(e=l(e)););return e}(e,o);if(e){o=Object.getOwnPropertyDescriptor(e,o);return o.get?o.get.call(t):o.value}})(e,o,t||e)}d=d&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d;var s={},u=function(){function t(e){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.guid=d.guid,this.options=d.extend(!0,{},this.constructor.defaultOptions,o),this.$element=d(e)}return o(t,[{key:"destroy",value:function(){var o=this;Object.keys(o).forEach(function(e){delete o[e]})}}],[{key:"defaultOptions",get:function(){return void 0===s[this.name]&&(s[this.name]={}),s[this.name]},set:function(e){s[this.name]=d.extend(!0,{},s[this.name],e)}}]),t}(),f="left",g="right",h=!0,m="always";function y(e,o){e.css("-webkit-transition",o),e.css("transition",o)}function b(e,o){e.css("-webkit-transform",o),e.css("transform",o)}function v(e){var o=$(window),t=o.innerWidth();return e.$body.height()>o.innerHeight()&&(t+=e.nativeScrollWidth),e.options.minLockWidth<=t}function O(e){var o,t,n,s,s=(t=(o=e).options.storageLockedKey,s=void 0===n?null:n,(n=null)!==(n=o.options.saveConfig&&"localStorage"in window?window.localStorage.getItem(o.$element.prop("id")+"/"+t):n)?n:s);null!==s&&e.options.toggleOnClick&&(e.options.locked="true"===s,e.options.locked||(y(e.$element,"none"),e.forceClose()))}function k(e,o){for(var t=["webkit","moz","ms","o",""],n="",s=0;s<5;s++)t[s]||(e=e.toLowerCase()),n+=" "+t[s]+e,void 0!==o&&(n+="."+o);return n}function w(e,o,t){d.event.trigger({type:"sidebar:"+e+".fxp.sidebar",sidebar:o,eventData:t,time:new Date})}var C=null;function x(){var e,o=document.createElement("div");return o.style.width="100px",o.style.height="100px",o.style.overflow="scroll",o.style.position="absolute",o.style.top="-9999px",document.body.appendChild(o),e=o.offsetWidth-o.clientWidth,document.body.removeChild(o),e}function S(e){var o=parseInt(e.$body.css("padding-right")||0,10);e.$body.get(0).scrollHeight>document.documentElement.clientHeight&&"hidden"!==e.$body.css("overflow-y")&&(e.originalBodyPad=document.body.style.paddingRight||"",e.originalBodyOverflowY=document.body.style.overflowY||"",e.$body.css({"padding-right":o+e.nativeScrollWidth+"px","overflow-y":"hidden"}),w("lock-body-scroll",e,e.nativeScrollWidth))}function D(e){null===e.originalBodyPad&&null===e.originalBodyOverflowY||(e.$body.css({"padding-right":e.originalBodyPad,"overflow-y":e.originalBodyOverflowY}),e.originalBodyPad=null,e.originalBodyOverflowY=null,w("unlock-body-scroll",e,e.nativeScrollWidth))}function T(e){var o=e.data;o.resetScrolling=window.setTimeout(function(){o.resetScrolling=null},1e3*o.options.resetScrollDelay)}function L(e){var o=e.data,t=!1,n=v(o);y(o.$element,"none"),n&&o.isLocked()&&(o.forceOpen(),D(o),t=!0),void 0===o.resizeDelay&&(o.resizeDelay=window.setTimeout(function(){delete o.resizeDelay,y(o.$element,""),!t&&o.isLocked()&&(!n&&o.isOpen()?S:D)(o)},500))}function E(e){var o,t;e instanceof jQuery.Event&&(e.data.options.disabledKeyboard||e.shiftKey===(t=(o=e.data).options.keyboardEvent).shiftKey&&e.ctrlKey===t.ctrlKey&&e.altKey===t.altKey&&e.keyCode===t.keyCode&&o.toggle(e))}function P(e){var o=e.data;e.stopPropagation(),e.preventDefault(),v(o)?o.close():o.forceClose()}function I(e){var o=e.data;0<o.options.closeOnSelectDelay?o.closeDelay=window.setTimeout(function(){o.close()},1e3*o.options.closeOnSelectDelay):o.close()}function F(e){null!==e.closeDelay&&(window.clearTimeout(e.closeDelay),e.closeDelay=null)}function H(e,o){o.off("mouseover.fxp.sidebar"+e.guid,$.proxy(e.open,e)).off(e.eventType+".fxp.sidebar"+e.guid,e.toggle).removeClass(e.options.classLocked+"-toggle").removeClass(e.options.classForceOpen+"-toggle").removeClass(e.options.classOpen+"-toggle"),e.enabled||o.removeClass("disabled")}function R(e,t){e.$toggles.each(function(e,o){o.addClass(t)})}function K(e,t){e.$toggles.each(function(e,o){o.removeClass(t)})}function W(e){var o=e.data,t=e.data.isOpen()?"opened":"closed";e.target===o.$element.get(0)&&(e.data.isOpen()?(R(o,o.options.classOpen+"-toggle"),$.fn.scroller&&o.options.useScroller&&o.$element.scroller("resizeScrollbar"),$("a:visible:first",o.$toggles.get(0).parent()).focus()):(K(o,o.options.classOpen+"-toggle"),$.fn.scroller&&o.options.useScroller&&o.$element.scroller("resizeScrollbar")),o.isLocked()&&(!v(o)&&o.isOpen()?S:D)(o),w(t,o))}function j(e,o){var t,n;if(null===e.resetScrolling&&o.target!==e.$obfuscator.get(0)){if(null===e.dragDirection){if(Math.abs(o.deltaX)<=Math.abs(o.deltaY))return;e.mouseDragEnd=null,e.dragDirection=o.direction,e.$element.css("user-select","none"),F(e)}-1===$.inArray(e.dragDirection,[Hammer.DIRECTION_LEFT,Hammer.DIRECTION_RIGHT])||e.options.locked&&v(e)&&e.isOpen()||(o.preventDefault(),null===e.dragStartPosition&&(e.dragStartPosition=(n=(t=e.$element).css("transform"),t={e:0,f:0},n&&("function"==typeof CSSMatrix?t=new CSSMatrix(n):"function"==typeof WebKitCSSMatrix?t=new WebKitCSSMatrix(n):"function"==typeof MSCSSMatrix?t=new MSCSSMatrix(n):(n=n.match(/matrix\(\s*-?\d+(?:\.\d+)?\s*,\s*-?\d+(?:\.\d+)?\s*,\s*-?\d+(?:\.\d+)?\s*,\s*-?\d+(?:\.\d+)?\s*,\s*(-?\d+(?:\.\d+)?)\s*,\s*(-?\d+(?:\.\d+)?)\s*\)/))&&(t.e=parseInt(n[1],10),t.f=parseInt(n[2],10))),t.e)),o=Math.round(e.dragStartPosition+o.deltaX),(f===e.getPosition()&&0<o||g===e.getPosition()&&o<0)&&(o=0),e.$element.addClass(e.options.classOnDragging),y(e.$element,"none"),b(e.$element,"translate3d("+(o+"px, 0px, 0px")+")"))}}function _(o){o.options.draggable&&"function"==typeof Hammer&&(o.$swipe=$('<div id="sidebar-swipe'+o.guid+'" class="fxp-sidebar-swipe"></div>'),o.$element.after(o.$swipe),o.hammer=new Hammer(o.$wrapper.get(0),$.extend(!0,{},o.options.hammer)),o.hammer.get("swipe").set({enable:!1}),o.hammer.get("tap").set({enable:!1}),o.hammer.on("panstart",function(e){j(o,e)}),o.hammer.on("pan",function(e){j(o,e)}),o.hammer.on("panend",function(e){!function(e,o){var t=Hammer.DIRECTION_LEFT,n=Hammer.DIRECTION_RIGHT;if(null===e.resetScrolling&&o.target!==e.$obfuscator.get(0)){if(e.dragStartPosition=null,o.preventDefault(),e.fixDragClick&&-1!==$.inArray(o.srcEvent.type,["pointerup","mouseup"])&&(e.mouseDragEnd=!0),e.$element.removeClass(e.options.classOnDragging),e.$element.css("user-select",""),y(e.$element,""),b(e.$element,""),Math.abs(o.deltaX)<=e.$element.innerWidth()/4)return e.dragDirection=null,e.$toggles.focus();g===e.getPosition()&&(t=Hammer.DIRECTION_RIGHT,n=Hammer.DIRECTION_LEFT),e.isOpen()&&t===e.dragDirection?e.forceClose():n===e.dragDirection&&(e.mouseDragEnd=null,e.isOpen()&&v(e)&&0<=$.inArray(e.options.forceToggle,[h,m])||v(e)&&m===e.options.forceToggle?e.forceOpen():e.open()),e.dragDirection=null}}(o,e)}),o.$wrapper.on("mousedown.fxp.sidebar",null,o,Y),o.$wrapper.on("click.fxp.sidebar",null,o,A),o.options.clickableSwipe&&o.$swipe.on("click.fxp.sidebar"+o.guid,null,o,M).on("mouseenter.fxp.sidebar"+o.guid,null,o,B).on("mouseleave.fxp.sidebar"+o.guid,null,o,z))}function M(e){z(e),e.data.toggle(e)}function B(e){e.data.$swipe.addClass("mouse-hover")}function z(e){e.data.$swipe.removeClass("mouse-hover")}function Y(e){e.preventDefault()}function A(e){var o=e.data;!0===o.mouseDragEnd&&(e.preventDefault(),F(o),o.mouseDragEnd=null)}var N=function(){!function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),o&&t(e,o)}(s,u);var n=a(s);function s(e){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};i(this,s);var t=r(e=n.call(this,e,o)),o=navigator.userAgent.toLowerCase();return e.eventType="click",e.nativeScrollWidth=x(),e.$toggles=d([]),e.$wrapper=d('<div class="'+e.options.classWrapper+'"></div>'),e.$container=d("> ."+e.options.classContainer,e.$element.parent()),e.$swipe=null,e.$obfuscator=d('<div class="'+e.options.classObfuscator+(e.options.showObfuscator?" show":"")+'"></div>'),e.$body=d("body"),e.enabled=!e.$element.hasClass("fxp-sidebar-disabled"),e.mini=e.$element.hasClass("fxp-sidebar-mini"),e.fullLocked=e.$element.hasClass(e.options.classFullLocked),e.hammer=null,e.dragStartPosition=null,e.mouseDragEnd=null,e.dragDirection=null,e.closeDelay=null,e.resetScrolling=null,e.originalBodyPad=null,e.originalBodyOverflowY=null,e.fixDragClick=!!~o.indexOf("firefox")||!!~o.indexOf("edge")||!!~o.indexOf("msie"),e.$element.before(e.$wrapper),e.$wrapper.append(e.$element),e.$wrapper.append(e.$obfuscator),e.$element.attr("data-sidebar","true"),null!==e.options.toggleId&&e.attachToggle("#"+e.options.toggleId),void 0!==e.options.scrollerStickyHeader&&(e.options.scroller.scrollerStickyHeader=e.options.scrollerStickyHeader,delete e.options.scrollerStickyHeader),void 0!==e.options.scrollerScrollbar&&(e.options.scroller.scrollbar=e.options.scrollerScrollbar,delete e.options.scrollerScrollbar),e.$element.hasClass(e.options.classLocked)&&(e.options.locked=!0),g!==e.options.position?e.options.position=f:e.$element.addClass("fxp-sidebar-right"),e.$element.hasClass("fxp-sidebar-right")&&(e.options.position=g),e.options.position===g&&(e.options.keyboardEvent.shiftKey=!0),e.enabled||e.$element.removeClass(e.options.classLocked).removeClass(e.options.classForceOpen).removeClass(e.options.classOpen).removeClass(e.options.classOpen+"-init"),e.options.locked&&(e.options.forceToggle=m,y(e.$element,"none"),e.enabled&&(e.$element.addClass(e.options.classLocked).addClass(e.options.classForceOpen).addClass(e.options.classOpen+"-init"),e.$container.addClass("container-force-open-"+e.options.position))),e.mini&&e.$container.addClass("container-mini-"+e.options.position),e.fullLocked&&e.$container.addClass("container-full-locked"),o=v(r(e)),d(window).on("keyup.fxp.sidebar"+e.guid,null,r(e),E),d(window).on("resize.fxp.sidebar"+e.guid,null,r(e),L),e.$element.hasClass(e.options.classOpen+"-init")&&(o?e.$element.addClass(e.options.classOpen):e.$element.removeClass(e.options.classOpen).removeClass(e.options.classForceOpen),e.$element.removeClass(e.options.classOpen+"-init")),(e.$element.hasClass(e.options.classOpen)&&!o?S:D)(r(e)),e.options.closeOnSelect&&e.$element.on(e.eventType+".fxp.sidebar"+e.guid,e.options.itemSelector,r(e),I),e.$element.on(k("TransitionEnd",".fxp.sidebar"+e.guid),null,r(e),W),e.$obfuscator.on(e.eventType+".fxp.sidebar"+e.guid,null,r(e),P),o=r(e),$.fn.scroller&&o.options.useScroller&&(o.$element.scroller($.extend({},{scrollbarInverse:g===o.options.position},o.options.scroller)),o.$element.on("scrolling.fxp.scroller.fxp.sidebar",null,o,T)),_(r(e)),O(r(e)),window.setTimeout(function(){y(t.$element,""),t.$element.addClass("fxp-sidebar-ready"),w("ready",t)},0),e}return o(s,[{key:"getPosition",value:function(){return this.options.position}},{key:"isLocked",value:function(){return this.options.locked}},{key:"isOpen",value:function(){return this.$element.hasClass(this.options.classOpen)}},{key:"isFullyOpened",value:function(){return this.$element.hasClass(this.options.classForceOpen)}},{key:"isClosable",value:function(){return this.enabled&&this.isOpen()&&!v(this)}},{key:"forceOpen",value:function(){!this.enabled||this.isOpen()&&this.isFullyOpened()||(F(this),this.$element.addClass(this.options.classForceOpen),this.$container.addClass("container-force-open-"+this.options.position),R(this,this.options.classForceOpen+"-toggle"),w("force-open",this),this.open())}},{key:"forceClose",value:function(){!this.enabled||!this.isOpen()||this.isLocked()&&v(this)||(F(this),K(this,this.options.classForceOpen+"-toggle"),this.$container.removeClass("container-force-open-"+this.options.position),this.$element.removeClass(this.options.classForceOpen),w("force-close",this),this.close())}},{key:"open",value:function(){this.enabled&&!this.isOpen()&&(w("open",this),F(this),d("[data-sidebar=true]").sidebar("forceClose"),this.$element.addClass(this.options.classOpen))}},{key:"close",value:function(){!this.enabled||!this.isOpen()||this.isFullyOpened()&&v(this)||(w("close",this),F(this),this.$element.removeClass(this.options.classOpen))}},{key:"toggle",value:function(e){var o=void 0!==e?e.data:this;o.enabled&&(void 0!==e&&(e.stopPropagation(),e.preventDefault()),w("toggle",this),o.options.toggleOnClick&&(o.options.locked=!o.options.locked,function(e,o,t){if(e.options.saveConfig&&"localStorage"in window)try{window.localStorage.setItem(e.$element.prop("id")+"/"+o,t)}catch(e){}}(o,o.options.storageLockedKey,o.options.locked)),o.isOpen()?o.isFullyOpened()?o.forceClose():v(o)&&0<=d.inArray(o.options.forceToggle,[h,m])?o.forceOpen():o.close():v(o)&&m===o.options.forceToggle?o.forceOpen():o.open())}},{key:"refresh",value:function(){w("refresh",this),d.fn.scroller&&this.options.useScroller&&this.$element.scroller("refresh")}},{key:"attachToggle",value:function(e){e=d(e),this.enabled||e.addClass("disabled"),this.isLocked()?e.addClass(this.options.classLocked+"-toggle"):e.removeClass(this.options.classLocked+"-toggle"),this.isFullyOpened()?e.addClass(this.options.classForceOpen+"-toggle"):e.removeClass(this.options.classForceOpen+"-toggle"),this.isOpen()?e.addClass(this.options.classOpen+"-toggle"):e.removeClass(this.options.classOpen+"-toggle"),e.on(this.eventType+".fxp.sidebar"+this.guid,null,this,this.toggle),0!==(C=null===C?x():C)&&this.options.toggleOpenOnHover&&e.on("mouseover.fxp.sidebar"+this.guid,d.proxy(this.open,this)),this.$toggles.push(e)}},{key:"detachToggle",value:function(e){var o,t=this.$toggles.length;for(e=d(e),o=0;o<t;++o)if(this.$toggles[o][0]===e[0]){H(this,this.$toggles[o]),this.$toggles.splice(o,1);break}}},{key:"detachToggles",value:function(){for(var e=this.$toggles.length,o=0;o<e;++o)H(this,this.$toggles[o]);this.$toggles.splice(0,e)}},{key:"isEnabled",value:function(){return this.enabled}},{key:"disable",value:function(){var e=this.isLocked();this.enabled&&(w("disable",this),this.options.locked=!1,this.forceClose(),this.options.locked=e,this.$element.addClass("fxp-sidebar-disabled"),R(this,"disabled"),this.isLocked()&&R(this,this.options.classLocked+"-toggle-disabled"),this.enabled=!1)}},{key:"enable",value:function(){this.enabled||(w("enable",this),this.enabled=!0,this.$element.removeClass("fxp-sidebar-disabled"),v(this)&&m===this.options.forceToggle&&this.forceOpen(),K(this,"disabled"),this.isLocked()&&K(this,this.options.classLocked+"-toggle-disabled"))}},{key:"destroy",value:function(){var e;F(this),this.detachToggles(),this.forceClose(),this.$container.removeClass("container-mini-"+this.options.position),this.$container.removeClass("container-full-locked"),d(window).off("keyup.fxp.sidebar"+this.guid,E),d(window).off("resize.fxp.sidebar"+this.guid,L),this.$element.off(this.eventType+".fxp.sidebar"+this.guid,this.options.itemSelector,I),this.$element.off(k("TransitionEnd",".fxp.sidebar"+this.guid),W),this.$obfuscator.off(this.eventType+".fxp.sidebar"+this.guid,P),(e=this).options.draggable&&"function"==typeof Hammer&&(e.options.clickableSwipe&&e.$swipe.off("click.fxp.sidebar"+e.guid,M).off("mouseenter.fxp.sidebar"+e.guid,B).off("mouseleave.fxp.sidebar"+e.guid,z),e.$wrapper.off("mousedown.fxp.sidebar",Y),e.$wrapper.off("click.fxp.sidebar",A),e.$swipe.remove(),e.hammer.destroy(),delete e.$swipe,delete e.hammer),e=this,$.fn.scroller&&e.options.useScroller&&(e.$element.scroller("destroy"),e.$element.off("scrolling.fxp.scroller.fxp.sidebar",T)),D(this),this.$wrapper.before(this.$element),this.$wrapper.remove(),this.$element.removeClass("fxp-sidebar-ready"),c(l(s.prototype),"destroy",this).call(this)}}]),s}();return N.defaultOptions={classWrapper:"fxp-sidebar-wrapper",classContainer:"container-main",classOpen:"fxp-sidebar-open",classLocked:"fxp-sidebar-locked",classFullLocked:"fxp-sidebar-full-locked",classForceOpen:"fxp-sidebar-force-open",classOnDragging:"fxp-sidebar-dragging",classObfuscator:"fxp-sidebar-obfuscator",forceToggle:!1,locked:!1,position:f,minLockWidth:992,toggleId:null,toggleOpenOnHover:!1,toggleOnClick:!1,saveConfig:!1,storageLockedKey:"fxp/sidebar/locked",clickableSwipe:!1,draggable:!0,closeOnSelect:!0,closeOnSelectDelay:.5,resetScrollDelay:.3,itemSelector:".fxp-sidebar-menu a",showObfuscator:!0,useScroller:!0,scrollerScrollbar:void 0,scroller:{contentSelector:".fxp-sidebar-menu",scrollerStickyHeader:!0,stickyOptions:{selector:"> .fxp-sidebar-menu > .fxp-sidebar-group > span"}},hammer:{},disabledKeyboard:!1,keyboardEvent:{ctrlKey:!0,shiftKey:!1,altKey:!0,keyCode:83}},function(o,r,a,e,t,n){var e=3<arguments.length&&void 0!==e&&e,s=4<arguments.length&&void 0!==t?t:null,c=5<arguments.length&&void 0!==n?n:"destroy",i=d.fn[o];d.fn[o]=function(){for(var s,e,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length,l=Array(1<o?o-1:0),t=1;t<o;t++)l[t-1]=arguments[t];return 1===(e=this.each(function(e,o){var t=d(o),n=t.data(r);n||(n=new a(o,"object"===p(i)?i:{}),t.data(r,n)),"string"==typeof i&&n&&(n[i]?s=(s=n[i].apply(n,l))!==n?s:void 0:n.constructor[i]&&(s=(s=n.constructor[i].apply(n,l))!==n?s:void 0),i===c&&t.removeData(r))})).length&&void 0!==s?s:e},d.fn[o].Constructor=a,e&&(d[o]=function(e){return d({})[o](e)}),d.fn[o].noConflict=function(){return d.fn[o]=i},null!==s&&d(window).on("load",function(){d(s).each(function(){var e=d(this);d.fn[o].call(e,e.data())})})}("sidebar","fxp.sidebar",N,!0,'[data-sidebar="true"]'),e.default=N,e}({},jQuery);
