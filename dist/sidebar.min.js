var FxpSidebar=function(e,d){"use strict";function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function s(e,o){for(var t=0;t<o.length;t++){var s=o[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function o(e,o,t){return o&&s(e.prototype,o),t&&s(e,t),e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function t(e,o){return(t=Object.setPrototypeOf||function(e,o){return e.__proto__=o,e})(e,o)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n(e,o,t){return(n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,o,t){var s=function(e,o){for(;!Object.prototype.hasOwnProperty.call(e,o)&&null!==(e=u(e)););return e}(e,o);if(s){var n=Object.getOwnPropertyDescriptor(s,o);return n.get?n.get.call(t):n.value}})(e,o,t||e)}d=d&&d.hasOwnProperty("default")?d.default:d;var i={},l=function(){function t(e){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};f(this,t),this.guid=d.guid,this.options=d.extend(!0,{},this.constructor.defaultOptions,o),this.$element=d(e)}return o(t,[{key:"destroy",value:function(){var o=this;Object.keys(o).forEach(function(e){delete o[e]})}}],[{key:"defaultOptions",set:function(e){i[this.name]=d.extend(!0,{},i[this.name],e)},get:function(){return void 0===i[this.name]&&(i[this.name]={}),i[this.name]}}]),t}(),h="left",m="right",r=!0,b="always";function y(e,o){e.css("-webkit-transition",o),e.css("transition",o)}function a(e,o){e.css("-webkit-transform",o),e.css("transform",o)}function v(e){var o=$(window),t=o.innerWidth();return e.$body.height()>o.innerHeight()&&(t+=e.nativeScrollWidth),e.options.minLockWidth<=t}function O(e){var o,t,s,n,i,l=(t=(o=e).options.storageLockedKey,n=void 0===s?null:s,i=null,o.options.saveConfig&&"localStorage"in window&&(i=window.localStorage.getItem(o.$element.prop("id")+"/"+t)),null!==i?i:n);null!==l&&e.options.toggleOnClick&&(e.options.locked="true"===l,e.options.locked||(y(e.$element,"none"),e.forceClose()))}function k(e,o){for(var t=["webkit","moz","ms","o",""],s="",n=0;n<5;n++)t[n]||(e=e.toLowerCase()),s+=" "+t[n]+e,void 0!==o&&(s+="."+o);return s}function w(e,o,t){d.event.trigger({type:"sidebar:"+e+".fxp.sidebar",sidebar:o,eventData:t,time:new Date})}var C=null;function x(){var e,o=document.createElement("div");return o.style.width="100px",o.style.height="100px",o.style.overflow="scroll",o.style.position="absolute",o.style.top="-9999px",document.body.appendChild(o),e=o.offsetWidth-o.clientWidth,document.body.removeChild(o),e}function S(e){var o=parseInt(e.$body.css("padding-right")||0,10);e.$body.get(0).scrollHeight>document.documentElement.clientHeight&&"hidden"!==e.$body.css("overflow-y")&&(e.originalBodyPad=document.body.style.paddingRight||"",e.originalBodyOverflowY=document.body.style.overflowY||"",e.$body.css({"padding-right":o+e.nativeScrollWidth+"px","overflow-y":"hidden"}),w("lock-body-scroll",e,e.nativeScrollWidth))}function D(e){null===e.originalBodyPad&&null===e.originalBodyOverflowY||(e.$body.css({"padding-right":e.originalBodyPad,"overflow-y":e.originalBodyOverflowY}),e.originalBodyPad=null,e.originalBodyOverflowY=null,w("unlock-body-scroll",e,e.nativeScrollWidth))}function T(e){var o=e.data;o.resetScrolling=window.setTimeout(function(){o.resetScrolling=null},1e3*o.options.resetScrollDelay)}function L(e){var o=e.data,t=!1,s=v(o);y(o.$element,"none"),s&&o.isLocked()&&(o.forceOpen(),D(o),t=!0),void 0===o.resizeDelay&&(o.resizeDelay=window.setTimeout(function(){delete o.resizeDelay,y(o.$element,""),!t&&o.isLocked()&&(!s&&o.isOpen()?S(o):D(o))},500))}function E(e){if(e instanceof jQuery.Event&&!e.data.options.disabledKeyboard){var o=e.data,t=o.options.keyboardEvent;e.shiftKey===t.shiftKey&&e.ctrlKey===t.ctrlKey&&e.altKey===t.altKey&&e.keyCode===t.keyCode&&o.toggle(e)}}function I(e){var o=e.data;e.stopPropagation(),e.preventDefault(),v(o)?o.close():o.forceClose()}function P(e){var o=e.data;0<o.options.closeOnSelectDelay?o.closeDelay=window.setTimeout(function(){o.close()},1e3*o.options.closeOnSelectDelay):o.close()}function F(e){null!==e.closeDelay&&(window.clearTimeout(e.closeDelay),e.closeDelay=null)}function H(e,o){o.off("mouseover.fxp.sidebar"+e.guid,$.proxy(e.open,e)).off(e.eventType+".fxp.sidebar"+e.guid,e.toggle).removeClass(e.options.classLocked+"-toggle").removeClass(e.options.classForceOpen+"-toggle").removeClass(e.options.classOpen+"-toggle"),e.enabled||o.removeClass("disabled")}function K(e,t){e.$toggles.each(function(e,o){o.addClass(t)})}function W(e,t){e.$toggles.each(function(e,o){o.removeClass(t)})}function R(e){var o=e.data,t=e.data.isOpen()?"opened":"closed";e.target===o.$element.get(0)&&(e.data.isOpen()?(K(o,o.options.classOpen+"-toggle"),$.fn.scroller&&o.options.useScroller&&o.$element.scroller("resizeScrollbar"),$("a:visible:first",o.$toggles.get(0).parent()).focus()):(W(o,o.options.classOpen+"-toggle"),$.fn.scroller&&o.options.useScroller&&o.$element.scroller("resizeScrollbar")),o.isLocked()&&(!v(o)&&o.isOpen()?S(o):D(o)),w(t,o))}function c(e,o){var t;if(null===e.resetScrolling&&o.target!==e.$obfuscator.get(0)){if(null===e.dragDirection){if(Math.abs(o.deltaX)<=Math.abs(o.deltaY))return;e.mouseDragEnd=null,e.dragDirection=o.direction,e.$element.css("user-select","none"),F(e)}var s,n,i;if(!(-1===$.inArray(e.dragDirection,[Hammer.DIRECTION_LEFT,Hammer.DIRECTION_RIGHT])||e.options.locked&&v(e)&&e.isOpen()))o.preventDefault(),null===e.dragStartPosition&&(e.dragStartPosition=(n=e.$element.css("transform"),i={e:0,f:0},n&&("function"==typeof CSSMatrix?i=new CSSMatrix(n):"function"==typeof WebKitCSSMatrix?i=new WebKitCSSMatrix(n):"function"==typeof MSCSSMatrix?i=new MSCSSMatrix(n):(s=n.match(/matrix\(\s*-?\d+(?:\.\d+)?\s*,\s*-?\d+(?:\.\d+)?\s*,\s*-?\d+(?:\.\d+)?\s*,\s*-?\d+(?:\.\d+)?\s*,\s*(-?\d+(?:\.\d+)?)\s*,\s*(-?\d+(?:\.\d+)?)\s*\)/))&&(i.e=parseInt(s[1],10),i.f=parseInt(s[2],10))),i.e)),t=Math.round(e.dragStartPosition+o.deltaX),(h===e.getPosition()&&0<t||m===e.getPosition()&&t<0)&&(t=0),e.$element.addClass(e.options.classOnDragging),y(e.$element,"none"),a(e.$element,"translate3d("+t+"px, 0px, 0px)")}}function _(o){o.options.draggable&&"function"==typeof Hammer&&(o.$swipe=$('<div id="sidebar-swipe'+o.guid+'" class="fxp-sidebar-swipe"></div>'),o.$element.after(o.$swipe),o.hammer=new Hammer(o.$wrapper.get(0),$.extend(!0,{},o.options.hammer)),o.hammer.get("swipe").set({enable:!1}),o.hammer.get("tap").set({enable:!1}),o.hammer.on("panstart",function(e){c(o,e)}),o.hammer.on("pan",function(e){c(o,e)}),o.hammer.on("panend",function(e){!function(e,o){var t=Hammer.DIRECTION_LEFT,s=Hammer.DIRECTION_RIGHT;if(null===e.resetScrolling&&o.target!==e.$obfuscator.get(0)){if(e.dragStartPosition=null,o.preventDefault(),e.fixDragClick&&-1!==$.inArray(o.srcEvent.type,["pointerup","mouseup"])&&(e.mouseDragEnd=!0),e.$element.removeClass(e.options.classOnDragging),e.$element.css("user-select",""),y(e.$element,""),a(e.$element,""),Math.abs(o.deltaX)<=e.$element.innerWidth()/4)return e.dragDirection=null,e.$toggles.focus();m===e.getPosition()&&(t=Hammer.DIRECTION_RIGHT,s=Hammer.DIRECTION_LEFT),e.isOpen()&&t===e.dragDirection?e.forceClose():s===e.dragDirection&&(e.mouseDragEnd=null,e.isOpen()&&v(e)&&0<=$.inArray(e.options.forceToggle,[r,b])?e.forceOpen():v(e)&&b===e.options.forceToggle?e.forceOpen():e.open()),e.dragDirection=null}}(o,e)}),o.$wrapper.on("mousedown.fxp.sidebar",null,o,z),o.$wrapper.on("click.fxp.sidebar",null,o,Y),o.options.clickableSwipe&&o.$swipe.on("click.fxp.sidebar"+o.guid,null,o,j).on("mouseenter.fxp.sidebar"+o.guid,null,o,M).on("mouseleave.fxp.sidebar"+o.guid,null,o,B))}function j(e){B(e),e.data.toggle(e)}function M(e){e.data.$swipe.addClass("mouse-hover")}function B(e){e.data.$swipe.removeClass("mouse-hover")}function z(e){e.preventDefault()}function Y(e){var o=e.data;!0===o.mouseDragEnd&&(e.preventDefault(),F(o),o.mouseDragEnd=null)}var A=function(e){function c(e){var o,t,s,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};f(this,c),t=this;var i,l,r=g(g(o=!(s=u(c).call(this,e,n))||"object"!=typeof s&&"function"!=typeof s?g(t):s)),a=navigator.userAgent.toLowerCase();return o.eventType="click",o.nativeScrollWidth=x(),o.$toggles=d([]),o.$wrapper=d('<div class="'+o.options.classWrapper+'"></div>'),o.$container=d("> ."+o.options.classContainer,o.$element.parent()),o.$swipe=null,o.$obfuscator=d('<div class="'+o.options.classObfuscator+(o.options.showObfuscator?" show":"")+'"></div>'),o.$body=d("body"),o.enabled=!o.$element.hasClass("fxp-sidebar-disabled"),o.mini=o.$element.hasClass("fxp-sidebar-mini"),o.fullLocked=o.$element.hasClass(o.options.classFullLocked),o.hammer=null,o.dragStartPosition=null,o.mouseDragEnd=null,o.dragDirection=null,o.closeDelay=null,o.resetScrolling=null,o.originalBodyPad=null,o.originalBodyOverflowY=null,o.fixDragClick=-1<a.indexOf("firefox")||-1<a.indexOf("edge")||-1<a.indexOf("msie"),o.$element.before(o.$wrapper),o.$wrapper.append(o.$element),o.$wrapper.append(o.$obfuscator),o.$element.attr("data-sidebar","true"),null!==o.options.toggleId&&o.attachToggle("#"+o.options.toggleId),void 0!==o.options.scrollerStickyHeader&&(o.options.scroller.scrollerStickyHeader=o.options.scrollerStickyHeader,delete o.options.scrollerStickyHeader),void 0!==o.options.scrollerScrollbar&&(o.options.scroller.scrollbar=o.options.scrollerScrollbar,delete o.options.scrollerScrollbar),o.$element.hasClass(o.options.classLocked)&&(o.options.locked=!0),m!==o.options.position?o.options.position=h:o.$element.addClass("fxp-sidebar-right"),o.$element.hasClass("fxp-sidebar-right")&&(o.options.position=m),o.options.position===m&&(o.options.keyboardEvent.shiftKey=!0),o.enabled||o.$element.removeClass(o.options.classLocked).removeClass(o.options.classForceOpen).removeClass(o.options.classOpen).removeClass(o.options.classOpen+"-init"),o.options.locked&&(o.options.forceToggle=b,y(o.$element,"none"),o.enabled&&(o.$element.addClass(o.options.classLocked).addClass(o.options.classForceOpen).addClass(o.options.classOpen+"-init"),o.$container.addClass("container-force-open-"+o.options.position))),o.mini&&o.$container.addClass("container-mini-"+o.options.position),o.fullLocked&&o.$container.addClass("container-full-locked"),i=v(g(g(o))),d(window).on("keyup.fxp.sidebar"+o.guid,null,g(g(o)),E),d(window).on("resize.fxp.sidebar"+o.guid,null,g(g(o)),L),o.$element.hasClass(o.options.classOpen+"-init")&&(i?o.$element.addClass(o.options.classOpen):o.$element.removeClass(o.options.classOpen).removeClass(o.options.classForceOpen),o.$element.removeClass(o.options.classOpen+"-init")),o.$element.hasClass(o.options.classOpen)&&!i?S(g(g(o))):D(g(g(o))),o.options.closeOnSelect&&o.$element.on(o.eventType+".fxp.sidebar"+o.guid,o.options.itemSelector,g(g(o)),P),o.$element.on(k("TransitionEnd",".fxp.sidebar"+o.guid),null,g(g(o)),R),o.$obfuscator.on(o.eventType+".fxp.sidebar"+o.guid,null,g(g(o)),I),l=g(g(o)),$.fn.scroller&&l.options.useScroller&&(l.$element.scroller($.extend({},{scrollbarInverse:m===l.options.position},l.options.scroller)),l.$element.on("scrolling.fxp.scroller.fxp.sidebar",null,l,T)),_(g(g(o))),O(g(g(o))),window.setTimeout(function(){y(r.$element,""),r.$element.addClass("fxp-sidebar-ready"),w("ready",r)},0),o}return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),o&&t(e,o)}(c,l),o(c,[{key:"getPosition",value:function(){return this.options.position}},{key:"isLocked",value:function(){return this.options.locked}},{key:"isOpen",value:function(){return this.$element.hasClass(this.options.classOpen)}},{key:"isFullyOpened",value:function(){return this.$element.hasClass(this.options.classForceOpen)}},{key:"isClosable",value:function(){return this.enabled&&this.isOpen()&&!v(this)}},{key:"forceOpen",value:function(){!this.enabled||this.isOpen()&&this.isFullyOpened()||(F(this),this.$element.addClass(this.options.classForceOpen),this.$container.addClass("container-force-open-"+this.options.position),K(this,this.options.classForceOpen+"-toggle"),w("force-open",this),this.open())}},{key:"forceClose",value:function(){!this.enabled||!this.isOpen()||this.isLocked()&&v(this)||(F(this),W(this,this.options.classForceOpen+"-toggle"),this.$container.removeClass("container-force-open-"+this.options.position),this.$element.removeClass(this.options.classForceOpen),w("force-close",this),this.close())}},{key:"open",value:function(){this.enabled&&!this.isOpen()&&(w("open",this),F(this),d("[data-sidebar=true]").sidebar("forceClose"),this.$element.addClass(this.options.classOpen))}},{key:"close",value:function(){!this.enabled||!this.isOpen()||this.isFullyOpened()&&v(this)||(w("close",this),F(this),this.$element.removeClass(this.options.classOpen))}},{key:"toggle",value:function(e){var o=void 0!==e?e.data:this;o.enabled&&(void 0!==e&&(e.stopPropagation(),e.preventDefault()),w("toggle",this),o.options.toggleOnClick&&(o.options.locked=!o.options.locked,function(e,o,t){if(e.options.saveConfig&&"localStorage"in window)try{window.localStorage.setItem(e.$element.prop("id")+"/"+o,t)}catch(e){}}(o,o.options.storageLockedKey,o.options.locked)),o.isOpen()?o.isFullyOpened()?o.forceClose():v(o)&&0<=d.inArray(o.options.forceToggle,[r,b])?o.forceOpen():o.close():v(o)&&b===o.options.forceToggle?o.forceOpen():o.open())}},{key:"refresh",value:function(){w("refresh",this),d.fn.scroller&&this.options.useScroller&&this.$element.scroller("refresh")}},{key:"attachToggle",value:function(e){e=d(e),this.enabled||e.addClass("disabled"),this.isLocked()?e.addClass(this.options.classLocked+"-toggle"):e.removeClass(this.options.classLocked+"-toggle"),this.isFullyOpened()?e.addClass(this.options.classForceOpen+"-toggle"):e.removeClass(this.options.classForceOpen+"-toggle"),this.isOpen()?e.addClass(this.options.classOpen+"-toggle"):e.removeClass(this.options.classOpen+"-toggle"),e.on(this.eventType+".fxp.sidebar"+this.guid,null,this,this.toggle),null===C&&(C=x()),0!==C&&this.options.toggleOpenOnHover&&e.on("mouseover.fxp.sidebar"+this.guid,d.proxy(this.open,this)),this.$toggles.push(e)}},{key:"detachToggle",value:function(e){var o,t=this.$toggles.length;for(e=d(e),o=0;o<t;++o)if(this.$toggles[o][0]===e[0]){H(this,this.$toggles[o]),this.$toggles.splice(o,1);break}}},{key:"detachToggles",value:function(){var e,o=this.$toggles.length;for(e=0;e<o;++e)H(this,this.$toggles[e]);this.$toggles.splice(0,o)}},{key:"isEnabled",value:function(){return this.enabled}},{key:"disable",value:function(){var e=this.isLocked();this.enabled&&(w("disable",this),this.options.locked=!1,this.forceClose(),this.options.locked=e,this.$element.addClass("fxp-sidebar-disabled"),K(this,"disabled"),this.isLocked()&&K(this,this.options.classLocked+"-toggle-disabled"),this.enabled=!1)}},{key:"enable",value:function(){this.enabled||(w("enable",this),this.enabled=!0,this.$element.removeClass("fxp-sidebar-disabled"),v(this)&&b===this.options.forceToggle&&this.forceOpen(),W(this,"disabled"),this.isLocked()&&W(this,this.options.classLocked+"-toggle-disabled"))}},{key:"destroy",value:function(){var e,o;F(this),this.detachToggles(),this.forceClose(),this.$container.removeClass("container-mini-"+this.options.position),this.$container.removeClass("container-full-locked"),d(window).off("keyup.fxp.sidebar"+this.guid,E),d(window).off("resize.fxp.sidebar"+this.guid,L),this.$element.off(this.eventType+".fxp.sidebar"+this.guid,this.options.itemSelector,P),this.$element.off(k("TransitionEnd",".fxp.sidebar"+this.guid),R),this.$obfuscator.off(this.eventType+".fxp.sidebar"+this.guid,I),(e=this).options.draggable&&"function"==typeof Hammer&&(e.options.clickableSwipe&&e.$swipe.off("click.fxp.sidebar"+e.guid,j).off("mouseenter.fxp.sidebar"+e.guid,M).off("mouseleave.fxp.sidebar"+e.guid,B),e.$wrapper.off("mousedown.fxp.sidebar",z),e.$wrapper.off("click.fxp.sidebar",Y),e.$swipe.remove(),e.hammer.destroy(),delete e.$swipe,delete e.hammer),o=this,$.fn.scroller&&o.options.useScroller&&(o.$element.scroller("destroy"),o.$element.off("scrolling.fxp.scroller.fxp.sidebar",T)),D(this),this.$wrapper.before(this.$element),this.$wrapper.remove(),this.$element.removeClass("fxp-sidebar-ready"),n(u(c.prototype),"destroy",this).call(this)}}]),c}();return A.defaultOptions={classWrapper:"fxp-sidebar-wrapper",classContainer:"container-main",classOpen:"fxp-sidebar-open",classLocked:"fxp-sidebar-locked",classFullLocked:"fxp-sidebar-full-locked",classForceOpen:"fxp-sidebar-force-open",classOnDragging:"fxp-sidebar-dragging",classObfuscator:"fxp-sidebar-obfuscator",forceToggle:!1,locked:!1,position:h,minLockWidth:992,toggleId:null,toggleOpenOnHover:!1,toggleOnClick:!1,saveConfig:!1,storageLockedKey:"fxp/sidebar/locked",clickableSwipe:!1,draggable:!0,closeOnSelect:!0,closeOnSelectDelay:.5,resetScrollDelay:.3,itemSelector:".fxp-sidebar-menu a",showObfuscator:!0,useScroller:!0,scrollerScrollbar:void 0,scroller:{contentSelector:".fxp-sidebar-menu",scrollerStickyHeader:!0,stickyOptions:{selector:"> .fxp-sidebar-menu > .fxp-sidebar-group > span"}},hammer:{},disabledKeyboard:!1,keyboardEvent:{ctrlKey:!0,shiftKey:!1,altKey:!0,keyCode:83}},function(o,r,a){var e=3<arguments.length&&void 0!==arguments[3]&&arguments[3],t=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,c=5<arguments.length&&void 0!==arguments[5]?arguments[5]:"destroy",s=d.fn[o];d.fn[o]=function(){for(var n,e,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length,l=Array(1<o?o-1:0),t=1;t<o;t++)l[t-1]=arguments[t];return 1===(e=this.each(function(e,o){var t=d(o),s=t.data(r);s||(s=new a(o,"object"===p(i)?i:{}),t.data(r,s)),"string"==typeof i&&s&&(s[i]?n=(n=s[i].apply(s,l))!==s?n:void 0:s.constructor[i]&&(n=(n=s.constructor[i].apply(s,l))!==s?n:void 0),i===c&&t.removeData(r))})).length&&void 0!==n?n:e},d.fn[o].Constructor=a,e&&(d[o]=function(e){return d({})[o](e)}),d.fn[o].noConflict=function(){return d.fn[o]=s},null!==t&&d(window).on("load",function(){d(t).each(function(){var e=d(this);d.fn[o].call(e,e.data())})})}("sidebar","fxp.sidebar",A,!0,'[data-sidebar="true"]'),e.default=A,e}({},jQuery);
